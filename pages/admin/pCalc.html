<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Â· Product Calculator</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            kkpink: '#ff69b4',
          }
        }
      }
    }
  </script>

  <!-- KK base + components -->
  <link rel="stylesheet" href="/css/theme/base.css">
  <link rel="stylesheet" href="/css/theme/components.css">

  <style>
    /* Custom scrollbar for tables */
    .custom-scrollbar::-webkit-scrollbar { height: 8px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #000; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #333; }

    /* Best CPI highlights */
    .best-paid { background: #d1fae5 !important; }
    .best-free { background: #fce7f3 !important; }

    /* Mobile improvements */
    @media (max-width: 640px) {
      button, [role="button"] { min-height: 44px; }
      input, select, textarea { font-size: 16px !important; }
    }
  </style>
</head>

<body class="kk-page kk-admin bg-gray-50 min-h-screen">
  <!-- Admin Nav mount -->
  <div id="kkAdminNavMount"></div>

  <main class="max-w-7xl mx-auto px-2 sm:px-6 py-4 sm:py-8">

    <!-- Header Card -->
    <header class="bg-white rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 mb-4 sm:mb-6">
      <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
        <div>
          <div class="inline-block bg-black text-white px-2 py-1 text-[10px] font-black uppercase tracking-[.25em] mb-2">
            Admin Panel
          </div>
          <h1 class="text-2xl sm:text-4xl font-black tracking-tight">
            Product Calculator
          </h1>
          <p class="text-xs sm:text-sm text-gray-500 mt-1">
            Calculate CPI for Paid vs Free shipping scenarios
          </p>
          <div id="pc_status" class="text-xs text-gray-400 mt-2">Loadingâ€¦</div>
        </div>

        <div class="flex gap-2">
          <button id="pc_refresh" type="button"
                  class="border-4 border-black bg-white text-black px-4 py-2 font-black uppercase tracking-[.12em] text-xs
                         hover:bg-black hover:text-white transition-all">
            Refresh
          </button>
          <button id="pc_reset" type="button"
                  class="border-4 border-gray-300 bg-gray-100 text-gray-600 px-4 py-2 font-black uppercase tracking-[.12em] text-xs
                         hover:border-black hover:bg-white hover:text-black transition-all">
            Reset
          </button>
        </div>
      </div>
    </header>

    <div class="grid lg:grid-cols-3 gap-4 sm:gap-6">

      <!-- LEFT: INPUTS -->
      <section class="lg:col-span-2 bg-white rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6">
        <div class="text-[11px] font-black uppercase tracking-[.25em] text-gray-400 mb-4">Inputs</div>

        <div class="grid sm:grid-cols-2 gap-4">
          <!-- Product Select -->
          <div>
            <label for="pc_product" class="block text-[9px] sm:text-[10px] font-black uppercase tracking-[.18em] mb-1 sm:mb-2 text-gray-500">
              Product
            </label>
            <select id="pc_product" class="w-full border-4 border-black px-3 py-2 sm:py-3 text-sm outline-none bg-white focus:border-kkpink transition-colors">
            </select>
          </div>

          <!-- View Mode -->
          <div>
            <label for="pc_view" class="block text-[9px] sm:text-[10px] font-black uppercase tracking-[.18em] mb-1 sm:mb-2 text-gray-500">
              View Mode
            </label>
            <select id="pc_view" class="w-full border-4 border-black px-3 py-2 sm:py-3 text-sm outline-none bg-white focus:border-kkpink transition-colors">
              <option value="both">Both (Paid + Free Shipping)</option>
              <option value="paid">Paid Shipping Only</option>
              <option value="free">Free Shipping Only</option>
            </select>
          </div>

          <!-- Unit Cost -->
          <div>
            <label for="pc_unit_cost" class="block text-[9px] sm:text-[10px] font-black uppercase tracking-[.18em] mb-1 sm:mb-2 text-gray-500">
              Unit Cost
            </label>
            <div class="relative">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 font-bold text-gray-400">$</span>
              <input id="pc_unit_cost" type="number" step="0.01" min="0" placeholder="0.00"
                     class="w-full border-4 border-black pl-8 pr-3 py-2 sm:py-3 text-sm outline-none focus:border-kkpink transition-colors" />
            </div>
          </div>

          <!-- Supplier Ship / Unit -->
          <div>
            <label for="pc_ship_per_unit" class="flex items-center gap-2 text-[9px] sm:text-[10px] font-black uppercase tracking-[.18em] mb-1 sm:mb-2 text-gray-500">
              Supplier Ship / Unit
              <span class="px-2 py-0.5 bg-blue-100 text-blue-700 text-[8px] rounded">AUTO</span>
            </label>
            <div class="relative">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 font-bold text-gray-400">$</span>
              <input id="pc_ship_per_unit" type="number" step="0.01" min="0" placeholder="Calculated from weight" readonly
                     class="w-full border-4 border-gray-300 bg-gray-50 pl-8 pr-3 py-2 sm:py-3 text-sm outline-none cursor-not-allowed" />
            </div>
            <div class="text-[9px] text-gray-400 mt-1">Based on weight Ã— 30 units bulk shipping</div>
          </div>

          <!-- Weight -->
          <div>
            <label for="pc_weight_oz" class="block text-[9px] sm:text-[10px] font-black uppercase tracking-[.18em] mb-1 sm:mb-2 text-gray-500">
              Weight (grams)
            </label>
            <input id="pc_weight_oz" type="number" step="1" min="0" placeholder="0"
                   class="w-full border-4 border-black px-3 py-2 sm:py-3 text-sm outline-none focus:border-kkpink transition-colors" />
          </div>

          <!-- STCC -->
          <div>
            <label for="pc_stcc" class="flex items-center gap-2 text-[9px] sm:text-[10px] font-black uppercase tracking-[.18em] mb-1 sm:mb-2 text-gray-500">
              STCC (Ship to Customer)
              <span id="pc_stcc_mode" class="px-2 py-0.5 bg-gray-100 text-[8px] rounded">AUTO</span>
            </label>
            <div class="relative">
              <span class="absolute left-3 top-1/2 -translate-y-1/2 font-bold text-gray-400">$</span>
              <input id="pc_stcc" type="number" step="0.01" min="0" placeholder="Auto-calculated"
                     class="w-full border-4 border-black pl-8 pr-3 py-2 sm:py-3 text-sm outline-none focus:border-kkpink transition-colors" />
            </div>
          </div>
        </div>

        <!-- Quantity Range -->
        <div class="border-t border-gray-200 mt-6 pt-6">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4">
            <div>
              <div class="text-[11px] font-black uppercase tracking-[.25em] text-gray-400">Quantity Range</div>
              <div class="text-xs text-gray-500">Generate rows like your Google Sheet</div>
            </div>
            <div class="flex items-center gap-2">
              <input id="pc_start" type="number" step="1" min="1" value="5" placeholder="Start"
                     class="w-16 border-4 border-black px-2 py-2 text-sm text-center outline-none focus:border-kkpink transition-colors" />
              <span class="text-gray-400">â†’</span>
              <input id="pc_end" type="number" step="1" min="1" value="150" placeholder="End"
                     class="w-16 border-4 border-black px-2 py-2 text-sm text-center outline-none focus:border-kkpink transition-colors" />
              <span class="text-gray-400 text-xs">step</span>
              <input id="pc_step" type="number" step="1" min="1" value="5" placeholder="Step"
                     class="w-16 border-4 border-black px-2 py-2 text-sm text-center outline-none focus:border-kkpink transition-colors" />
            </div>
          </div>

          <div class="flex gap-2">
            <button id="pc_generate" type="button"
                    class="flex-1 border-4 border-black bg-black text-white px-4 py-3 font-black uppercase tracking-[.12em] text-xs
                           hover:bg-white hover:text-black transition-all">
              Generate Table
            </button>
            <button id="pc_copy" type="button"
                    class="border-4 border-black bg-white text-black px-4 py-3 font-black uppercase tracking-[.12em] text-xs
                           hover:bg-black hover:text-white transition-all">
              ðŸ“‹ Copy CSV
            </button>
          </div>
        </div>

        <!-- Results Table -->
        <div class="border-t border-gray-200 mt-6 pt-6">
          <div class="overflow-x-auto custom-scrollbar">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b-4 border-black">
                  <th class="text-left py-3 px-2 font-black text-[10px] uppercase tracking-[.15em]">Qty</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em]">Item Cost</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em]">Weight</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em]">SC</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em] bg-emerald-50">Cost Paid</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em] bg-pink-50">Cost Free</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em] bg-emerald-50">CPI Paid</th>
                  <th class="text-right py-3 px-2 font-black text-[10px] uppercase tracking-[.15em] bg-pink-50">CPI Free</th>
                </tr>
              </thead>
              <tbody id="pc_tbody" class="divide-y divide-gray-100">
                <tr>
                  <td colspan="8" class="py-8 text-center text-gray-400">
                    Select a product and click "Generate Table"
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- RIGHT: SUMMARY -->
      <aside class="bg-white rounded-2xl shadow-sm border border-gray-200 p-4 sm:p-6 h-fit lg:sticky lg:top-6">
        <div class="text-[11px] font-black uppercase tracking-[.25em] text-gray-400 mb-4">Summary</div>

        <div class="space-y-4">
          <div class="border-4 border-black p-4">
            <div class="text-[9px] font-black uppercase tracking-[.15em] text-gray-500 mb-1">Product</div>
            <div id="pc_sum_name" class="font-black text-lg truncate">â€”</div>
          </div>

          <div class="grid grid-cols-2 gap-3">
            <div class="bg-gray-50 rounded-xl p-3 border border-gray-100">
              <div class="text-[9px] font-black uppercase tracking-[.15em] text-gray-500">Unit Cost</div>
              <div id="pc_sum_unit" class="font-black text-lg mt-1">â€”</div>
            </div>
            <div class="bg-gray-50 rounded-xl p-3 border border-gray-100">
              <div class="text-[9px] font-black uppercase tracking-[.15em] text-gray-500">Weight</div>
              <div id="pc_sum_weight" class="font-black text-lg mt-1">â€”</div>
            </div>
            <div class="bg-gray-50 rounded-xl p-3 border border-gray-100">
              <div class="text-[9px] font-black uppercase tracking-[.15em] text-gray-500">Supplier Ship</div>
              <div id="pc_sum_ship" class="font-black text-lg mt-1">â€”</div>
            </div>
            <div class="bg-gray-50 rounded-xl p-3 border border-gray-100">
              <div class="text-[9px] font-black uppercase tracking-[.15em] text-gray-500">STCC</div>
              <div id="pc_sum_stcc" class="font-black text-lg mt-1">â€”</div>
            </div>
          </div>

          <div class="border-t border-gray-200 pt-4">
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-emerald-50 rounded-xl p-4 border-2 border-emerald-200">
                <div class="text-[9px] font-black uppercase tracking-[.15em] text-emerald-700">ðŸ’µ Paid Ship</div>
                <div id="pc_sum_cpi_paid" class="font-black text-xl mt-1 text-emerald-600">â€”</div>
                <div class="text-[9px] text-emerald-600 mt-1">Best CPI</div>
              </div>
              <div class="bg-pink-50 rounded-xl p-4 border-2 border-pink-200">
                <div class="text-[9px] font-black uppercase tracking-[.15em] text-pink-700">ðŸ†“ Free Ship</div>
                <div id="pc_sum_cpi_free" class="font-black text-xl mt-1 text-pink-600">â€”</div>
                <div class="text-[9px] text-pink-600 mt-1">Best CPI</div>
              </div>
            </div>
          </div>

          <div class="text-xs text-gray-400 mt-4">
            <span class="inline-block w-3 h-3 bg-emerald-100 border border-emerald-300 rounded mr-1"></span> Best Paid CPI
            <br>
            <span class="inline-block w-3 h-3 bg-pink-100 border border-pink-300 rounded mr-1 mt-1"></span> Best Free CPI
          </div>
        </div>
      </aside>

    </div>
  </main>

  <!-- Footer mount -->
  <div id="kkFooterMount"></div>

  <script type="module" src="/js/admin/pCalc/index.js"></script>
</body>
</html>
